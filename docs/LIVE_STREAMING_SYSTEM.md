# üî¥ Live Streaming System Documentation
## Green Market - ‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏•‡∏ü‡πå‡∏™‡∏ï‡∏£‡∏µ‡∏° ‡∏°‡∏∑‡∏≠‡∏≠‡∏≤‡∏ä‡∏µ‡∏û

---

## üìã ‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç
1. [‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö](#‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö)
2. [‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•](#‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)
3. [‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ](#‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ)
4. [‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô](#‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)
5. [‡∏Å‡∏≤‡∏£‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤](#‡∏Å‡∏≤‡∏£‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤)

---

## üéØ ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏ö‡∏ö

### **‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏´‡∏•‡∏±‡∏Å:**
- ‚úÖ **Real-time Streaming** - ‡∏ñ‡πà‡∏≤‡∏¢‡∏ó‡∏≠‡∏î‡∏™‡∏î‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û HD (720p)
- ‚úÖ **Auto Recording** - ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏Ç‡∏ì‡∏∞‡πÑ‡∏•‡∏ü‡πå
- ‚úÖ **Comments & Reactions** - ‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏î‡πÑ‡∏•‡∏Ñ‡πå‡πÅ‡∏ö‡∏ö real-time
- ‚úÖ **Viewer Counter** - ‡∏ô‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏ä‡∏°‡πÅ‡∏ö‡∏ö real-time
- ‚úÖ **Auto Compression** - ‡∏ö‡∏µ‡∏ö‡∏≠‡∏±‡∏î‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÄ‡∏õ‡πá‡∏ô SD ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏ö‡πÑ‡∏•‡∏ü‡πå
- ‚úÖ **Auto Deletion** - ‡∏•‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î
- ‚úÖ **Scheduled Streams** - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏•‡∏ü‡πå‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤

---

## üì¶ ‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

### **‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ö‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÉ‡∏´‡∏ç‡πà:**

| Platform | During Live | After Live | Auto-Delete | Archive |
|----------|-------------|------------|-------------|---------|
| **Facebook** | Full HD (1080p) | Save to profile | 60 days | ‚úÖ Optional |
| **Instagram** | HD (720p) | Save to IGTV | 30 days | ‚úÖ Optional |
| **TikTok** | HD (720p) | Auto-save | 30 days | ‚ùå No |
| **YouTube** | Full HD+ | Forever | Never | ‚úÖ Forever |
| **Twitter/X** | HD (720p) | 30 days | 30 days | ‚ùå No |
| **Green Market** üü¢ | **HD (720p)** | **7 days (SD)** | **7 days** | **‚úÖ Optional** |

---

### **‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢ Green Market (‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà):**

#### **1. ‡∏Ç‡∏ì‡∏∞‡πÑ‡∏•‡∏ü‡πå (During Live)**
- **‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û**: HD (720p, 30fps)
- **Bitrate**: 2-3 Mbps
- **‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å**: ‚úÖ ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î recording)
- **‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà**: ~900 MB/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á

#### **2. ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏ö‡πÑ‡∏•‡∏ü‡πå (After Live)**
- **‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û**: SD (480p, 30fps) - ‡∏ö‡∏µ‡∏ö‡∏≠‡∏±‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- **Bitrate**: 1 Mbps
- **‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà**: ~450 MB/‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á (‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î 50%)
- **‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ**: 7 ‡∏ß‡∏±‡∏ô

#### **3. Auto-Delete Schedule**
```
Day 0: Live ‡∏™‡∏î (HD 720p)
Day 0-1: Processing ‚Üí Compress to SD 480p
Day 1-7: Available (SD 480p)
Day 7: Auto-delete (‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà archive)
```

#### **4. Archive (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ)**
- **‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û**: SD (480p)
- **‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ**: ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î (‡∏à‡∏ô‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏•‡∏ö‡πÄ‡∏≠‡∏á)
- **Comments**: ‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏Ñ‡πà 100 comments ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
- **Auto-delete**: ‚ùå ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

---

## üõ†Ô∏è ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ

### **Frontend (Flutter)**
- `agora_rtc_engine` - Live streaming (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)
- `video_player` - ‡πÄ‡∏•‡πà‡∏ô‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ
- `cloud_firestore` - Real-time comments & stats
- `firebase_storage` - ‡πÄ‡∏Å‡πá‡∏ö‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å

### **Backend (Firebase)**
- **Firestore** - ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• live streams
- **Storage** - ‡πÄ‡∏Å‡πá‡∏ö‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÅ‡∏•‡∏∞ thumbnails
- **Cloud Functions** - Auto-cleanup, compression
- **Realtime Database** - Real-time viewer count

### **Third-Party Services**
- **Agora.io** - WebRTC streaming infrastructure
  - Free: 10,000 minutes/month
  - HD quality support
  - Low latency (< 300ms)

---

## üì± ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

### **1. ‡∏™‡∏£‡πâ‡∏≤‡∏á Live Stream**

```dart
import 'package:green_market/services/live_stream_service.dart';

final liveService = LiveStreamService();

// ‡∏™‡∏£‡πâ‡∏≤‡∏á live stream
final streamId = await liveService.createLiveStream(
  streamerId: currentUser.id,
  streamerName: currentUser.displayName,
  streamerPhoto: currentUser.photoUrl,
  title: '‡∏õ‡∏•‡∏π‡∏Å‡∏ú‡∏±‡∏Å‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå ‡∏Å‡∏±‡∏ö‡∏™‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡∏ß‡∏û‡∏≠‡πÄ‡∏û‡∏µ‡∏¢‡∏á',
  description: '‡∏™‡∏≠‡∏ô‡∏ß‡∏¥‡∏ò‡∏µ‡∏õ‡∏•‡∏π‡∏Å‡∏ú‡∏±‡∏Å‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡πÑ‡∏°‡πà‡∏á‡πâ‡∏≠‡∏™‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ',
  tags: ['‡∏õ‡∏•‡∏π‡∏Å‡∏ú‡∏±‡∏Å', '‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå', '‡∏™‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡∏ß'],
  scheduledTime: null, // ‡πÑ‡∏•‡∏ü‡πå‡∏ó‡∏±‡∏ô‡∏ó‡∏µ ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏ß‡∏•‡∏≤
  retentionDays: 7, // ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ 7 ‡∏ß‡∏±‡∏ô
);

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÑ‡∏•‡∏ü‡πå
await liveService.startLiveStream(streamId);
```

### **2. ‡∏î‡∏π‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏ä‡∏° Real-time**

```dart
// Subscribe to viewer count
liveService.getLiveStream(streamId).listen((stream) {
  print('‡∏ú‡∏π‡πâ‡∏ä‡∏°‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô: ${stream?.currentViewers}');
  print('‡∏ú‡∏π‡πâ‡∏ä‡∏°‡∏£‡∏ß‡∏°: ${stream?.totalViewers}');
  print('‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î: ${stream?.peakViewers}');
});
```

### **3. ‡∏à‡∏ö‡∏Å‡∏≤‡∏£‡πÑ‡∏•‡∏ü‡πå**

```dart
// ‡∏à‡∏ö‡πÑ‡∏•‡∏ü‡πå ‚Üí ‡∏à‡∏∞ trigger auto-compression
await liveService.endLiveStream(streamId);

// ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞:
// 1. ‡∏´‡∏¢‡∏∏‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
// 2. Compress ‡πÄ‡∏õ‡πá‡∏ô SD (480p) 
// 3. ‡∏Å‡∏≥‡∏´‡∏ô‡∏î deleteAt = now + 7 days
// 4. ‡∏•‡∏ö HD version ‡∏ï‡πâ‡∏ô‡∏â‡∏ö‡∏±‡∏ö
```

### **4. Archive (‡πÄ‡∏Å‡πá‡∏ö‡∏ñ‡∏≤‡∏ß‡∏£)**

```dart
// ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡∏ñ‡∏≤‡∏ß‡∏£ (‡πÑ‡∏°‡πà‡∏•‡∏ö‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
await liveService.archiveLiveStream(streamId);

// ‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô:
// - status: archived
// - autoDeleteEnabled: false
// - ‡∏•‡∏ö comments ‡πÄ‡∏Å‡πà‡∏≤ (‡πÄ‡∏´‡∏•‡∏∑‡∏≠ 100 ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î)
```

---

## üîß ‡∏Å‡∏≤‡∏£‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤

### **1. Auto-Cleanup (Cloud Functions)**

#### **‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô 03:00 AM:**

```javascript
// functions/index.js
exports.cleanupExpiredStreams = functions.pubsub
  .schedule('0 3 * * *')
  .timeZone('Asia/Bangkok')
  .onRun(async (context) => {
    // ‡∏•‡∏ö streams ‡∏ó‡∏µ‡πà‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ (> 7 ‡∏ß‡∏±‡∏ô)
    // ‡∏•‡∏ö‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡∏à‡∏≤‡∏Å Storage
    // ‡∏•‡∏ö comments, viewers, likes
  });
```

### **2. Storage Monitoring**

```javascript
exports.monitorStorageSize = functions.pubsub
  .schedule('0 0 * * *')
  .onRun(async (context) => {
    // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ç‡∏ô‡∏≤‡∏î Storage
    // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô 4.5GB ‚Üí ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô admin
    // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
  });
```

### **3. Manual Cleanup**

```dart
// ‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
await liveService.cleanupExpiredStreams();
```

---

## üìä ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà Storage

### **‡∏™‡∏°‡∏°‡∏ï‡∏¥‡∏ê‡∏≤‡∏ô:**
- ‡πÑ‡∏•‡∏ü‡πå‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢ 30 ‡∏ô‡∏≤‡∏ó‡∏µ/‡∏Ñ‡∏£‡∏±‡πâ‡∏á
- ‡πÑ‡∏•‡∏ü‡πå 10 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á/‡∏ß‡∏±‡∏ô
- ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ 7 ‡∏ß‡∏±‡∏ô

### **‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì:**
```
1 ‡πÑ‡∏•‡∏ü‡πå (30 ‡∏ô‡∏≤‡∏ó‡∏µ):
- HD: 450 MB (‡∏Ç‡∏ì‡∏∞‡πÑ‡∏•‡∏ü‡πå)
- SD: 225 MB (‡∏´‡∏•‡∏±‡∏á‡∏ö‡∏µ‡∏ö‡∏≠‡∏±‡∏î)

10 ‡πÑ‡∏•‡∏ü‡πå/‡∏ß‡∏±‡∏ô √ó 225 MB = 2.25 GB/‡∏ß‡∏±‡∏ô
2.25 GB √ó 7 ‡∏ß‡∏±‡∏ô = 15.75 GB/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå

üí° Firebase Storage Free: 5 GB
üí∞ ‡∏ï‡πâ‡∏≠‡∏á upgrade Blaze Plan
```

### **‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î:**
1. ‚úÖ ‡πÄ‡∏Å‡πá‡∏ö‡πÅ‡∏Ñ‡πà **3 ‡∏ß‡∏±‡∏ô** ‡πÅ‡∏ó‡∏ô 7 ‡∏ß‡∏±‡∏ô ‚Üí **6.75 GB**
2. ‚úÖ ‡∏ö‡∏µ‡∏ö‡∏≠‡∏±‡∏î‡πÄ‡∏õ‡πá‡∏ô **360p** (ultra-light) ‚Üí **3.5 GB**
3. ‚úÖ ‡∏à‡∏≥‡∏Å‡∏±‡∏î **5 ‡πÑ‡∏•‡∏ü‡πå/‡∏ß‡∏±‡∏ô** ‚Üí **7.87 GB**
4. ‚úÖ ‡∏™‡πà‡∏á‡πÄ‡∏™‡∏£‡∏¥‡∏° **Archive ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÑ‡∏•‡∏ü‡πå‡∏î‡∏µ** ‚Üí ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà

---

## ‚öôÔ∏è ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á

### **1. ‡πÄ‡∏û‡∏¥‡πà‡∏° Dependencies**

```yaml
# pubspec.yaml
dependencies:
  agora_rtc_engine: ^6.3.2  # Live streaming
  permission_handler: ^11.0.1  # Permissions
```

```bash
flutter pub get
```

### **2. Setup Agora**

1. ‡∏™‡∏°‡∏±‡∏Ñ‡∏£ Agora: https://console.agora.io
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á Project ‚Üí ‡∏£‡∏±‡∏ö App ID
3. ‡πÄ‡∏û‡∏¥‡πà‡∏° App ID ‡πÉ‡∏ô `lib/utils/constants.dart`:

```dart
class AgoraConfig {
  static const String appId = 'YOUR_AGORA_APP_ID';
}
```

### **3. Deploy Cloud Functions**

```bash
cd functions
npm install
firebase deploy --only functions
```

---

## üìà ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÅ‡∏•‡∏∞ Analytics

### **Dashboard ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admin:**

```dart
final stats = await liveService.getStreamingStats();

print('''
üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ Live Streaming (30 ‡∏ß‡∏±‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î):
- ‡πÑ‡∏•‡∏ü‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${stats['totalStreams']}
- ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÑ‡∏•‡∏ü‡πå: ${stats['liveNow']}
- ‡∏ú‡∏π‡πâ‡∏ä‡∏°‡∏£‡∏ß‡∏°: ${stats['totalViewers']}
- ‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢: ${stats['averageViewers']} ‡∏Ñ‡∏ô/‡πÑ‡∏•‡∏ü‡πå
- ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏£‡∏ß‡∏°: ${stats['totalDurationMinutes']} ‡∏ô‡∏≤‡∏ó‡∏µ
''');
```

---

## üöÄ Best Practices

### **‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Streamers:**
1. ‚úÖ ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏•‡∏ü‡πå‡∏ó‡∏µ‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡∏°‡∏µ keyword
2. ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏° hashtags ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á
3. ‚úÖ Archive ‡πÑ‡∏•‡∏ü‡πå‡∏ó‡∏µ‡πà‡∏î‡∏µ ‡∏°‡∏µ‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤
4. ‚úÖ ‡∏•‡∏ö‡πÑ‡∏•‡∏ü‡πå‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏≠‡∏á (‡πÑ‡∏°‡πà‡∏£‡∏≠ auto-delete)

### **‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Admins:**
1. ‚úÖ ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° Storage ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô
2. ‚úÖ ‡∏£‡∏±‡∏ô cleanup manual ‡∏ñ‡πâ‡∏≤ Storage ‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏ï‡πá‡∏°
3. ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö logs ‡∏Ç‡∏≠‡∏á Cloud Functions
4. ‚úÖ ‡∏õ‡∏£‡∏±‡∏ö retentionDays ‡∏ï‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á

---

## üîí Security & Privacy

### **Firestore Rules:**

```javascript
// firestore.rules
match /live_streams/{streamId} {
  // ‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô public
  allow read: if resource.data.isPublic == true 
                 || request.auth.uid == resource.data.streamerId;
  
  // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á
  allow create: if request.auth != null 
                   && request.auth.uid == request.resource.data.streamerId;
  
  // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á
  allow update: if request.auth.uid == resource.data.streamerId;
  
  // ‡∏•‡∏ö‡πÑ‡∏î‡πâ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠ admin
  allow delete: if request.auth.uid == resource.data.streamerId
                   || get(/databases/$(database)/documents/users/$(request.auth.uid)).data.role == 'admin';
}
```

---

## üìû Support & Troubleshooting

### **‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢:**

**Q: ‡πÑ‡∏•‡∏ü‡πå‡∏ï‡∏¥‡∏î‡∏Ç‡∏±‡∏î/lag**
- ‚úÖ ‡πÄ‡∏ä‡πá‡∏Ñ‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï (‡∏ï‡πâ‡∏≠‡∏á > 5 Mbps upload)
- ‚úÖ ‡∏•‡∏î‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÄ‡∏õ‡πá‡∏ô SD (480p)
- ‚úÖ ‡∏õ‡∏¥‡∏î apps ‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏ô‡πá‡∏ï

**Q: ‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠‡πÑ‡∏°‡πà‡∏ö‡∏µ‡∏ö‡∏≠‡∏±‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥**
- ‚úÖ ‡πÄ‡∏ä‡πá‡∏Ñ Cloud Functions logs
- ‚úÖ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö compression_jobs collection
- ‚úÖ Redeploy functions

**Q: Storage ‡πÄ‡∏ï‡πá‡∏°**
- ‚úÖ ‡∏£‡∏±‡∏ô `cleanupExpiredStreams` ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
- ‚úÖ ‡∏•‡∏î retentionDays ‡πÄ‡∏õ‡πá‡∏ô 3-5 ‡∏ß‡∏±‡∏ô
- ‚úÖ ‡∏ö‡∏µ‡∏ö‡∏≠‡∏±‡∏î‡πÄ‡∏õ‡πá‡∏ô 360p ‡πÅ‡∏ó‡∏ô 480p

---

## üìù Changelog

### **Version 1.0.0** (2025-12-05)
- ‚úÖ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö Live Streaming
- ‚úÖ Auto-compression & deletion
- ‚úÖ Real-time comments & viewers
- ‚úÖ Archive system
- ‚úÖ Cloud Functions auto-cleanup
- ‚úÖ Storage monitoring

---

**üå± Made with ‚ù§Ô∏è by Green Market Team**
